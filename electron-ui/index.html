<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<style>
html, body{
  height:100%;
}

body {
  margin: 0;
}
svg {
  position: absolute;
  height: 100%;
  width: 100%;
  border: 1px solid #999;
  overflow: hidden;
}
.node {
  white-space: nowrap;
}
.node rect,
.node circle,
.node ellipse {
  stroke: #333;
  fill: #fff;
  stroke-width: 1.5px;
}
.cluster rect {
  stroke: #333;
  fill: #000;
  fill-opacity: 0.1;
  stroke-width: 1.5px;
}
.edgePath path.path {
  stroke: #333;
  stroke-width: 1.5px;
  fill: none;
}
</style>
  </head>
  <body>
    <script>
      var model = require('../test/models/todomvc');
      var states = require('../lib/states');
      var Immutable = require('Immutable');
      window.d3 = require('d3');
      var dot = require('../lib/viz/dot');
      var graphlibDot = require('graphlib-dot');
      var render = require('dagre-d3').render();


      function createGraph(model) {
        var graphDot = dot(Immutable.fromJS(model.transitions));
        var g = graphlibDot.read(graphDot);
        if (!g.graph().hasOwnProperty("marginx") &&
        !g.graph().hasOwnProperty("marginy")) {
          g.graph().marginx = 20;
          g.graph().marginy = 20;
        }
        d3.select("body").append("svg").append("g");
        var svg = d3.select("svg"),
        inner = d3.select("svg g"),
        zoom = d3.behavior.zoom().on("zoom", function() {
          inner.attr("transform", "translate(" + d3.event.translate + ")" +
          "scale(" + d3.event.scale + ")");
          });
          svg.call(zoom);
        d3.select("svg g").call(render, g);

      }

      createGraph(model);
    </script>
    </body>
  </html>
